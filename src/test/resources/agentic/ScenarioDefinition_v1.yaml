# ScenarioDefinition â€” Canonical Contract (v1)
# Purpose: Declarative definition of end-to-end API test scenarios for Agentic AI.
# This artifact is DATA, not code.

scenarioDefinitionVersion: v1

schema:
  scenarioId: string            # Stable identifier for learning/memory
  name: string                  # Human-readable name
  goal: string                  # Why this scenario exists (business/quality intent)

  steps:
    - stepId: string            # Unique step identifier
      action: string            # Semantic action (create|get|update|delete|verify)
      resource: string          # Logical resource (user|post|comment|todo)
      dependsOn: [string]       # stepIds that must be completed first
      captures: [string]        # Logical outputs (e.g., userId, postId)

  cleanup:
    strategy: string            # delete-root | reverse-order | custom

# -------------------------------
# Example (GoREST)
# -------------------------------

example:
  scenarioId: user-post-comment-e2e
  name: User creates post and comment
  goal: Verify that posts and comments are correctly linked to a user

  steps:
    - stepId: create-user
      action: create
      resource: user
      dependsOn: []
      captures: [userId]

    - stepId: create-post
      action: create
      resource: post
      dependsOn: [create-user]
      captures: [postId]

    - stepId: create-comment
      action: create
      resource: comment
      dependsOn: [create-post]
      captures: []

    - stepId: verify-comments
      action: verify
      resource: comment
      dependsOn: [create-comment]
      captures: []

  cleanup:
    strategy: delete-root
