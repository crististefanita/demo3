<!DOCTYPE html>

<html lang="ro">
<head>
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
<title>Living Architecture (UI + API) — Canonical v1.0</title>
<style>
  :root {
   --bg: #0b0f14;
   --panel: #111826;
   --panel2: #0f1724;
   --text: #e6edf3;
   --muted: #a8b3cf;
   --border: #243044;
   --accent: #7aa2ff;
   --accent2: #6ee7b7;
   --warn: #fbbf24;
   --bad: #fb7185;
   --good: #34d399;
   --codebg: #0a0f18;
   --shadow: rgba(0,0,0,.35);
   --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
   --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif;
  }
  html, body { height: 100%; }
  body {
   margin: 0;
   font-family: var(--sans);
   background: radial-gradient(1200px 800px at 10% 0%, #142038 0%, var(--bg) 45%) fixed;
   color: var(--text);
   line-height: 1.55;
  }
  a { color: var(--accent); text-decoration: none; }
  a:hover { text-decoration: underline; }
  .wrap { max-width: 1150px; margin: 0 auto; padding: 28px 18px 60px; }
  header {
   background: linear-gradient(180deg, rgba(17,24,38,.85), rgba(17,24,38,.35));
   border: 1px solid var(--border);
   box-shadow: 0 12px 30px var(--shadow);
   border-radius: 18px;
   padding: 22px 22px 18px;
   margin-bottom: 16px;
  }
  h1 { margin: 0 0 6px; font-size: 26px; letter-spacing: .2px; }
  .sub { color: var(--muted); font-size: 14px; }
  .badge {
   display: inline-block; padding: 3px 10px; border-radius: 999px;
   border: 1px solid var(--border); background: rgba(15,23,36,.75);
   font-size: 12px; color: var(--muted); margin-left: 8px;
  }
  .grid {
   display: grid;
   grid-template-columns: 1.2fr .8fr;
   gap: 14px;
   margin-top: 14px;
  }
  @media (max-width: 980px) {
   .grid { grid-template-columns: 1fr; }
  }
  .card {
   border: 1px solid var(--border);
   border-radius: 16px;
   background: rgba(17,24,38,.72);
   box-shadow: 0 10px 26px var(--shadow);
   padding: 16px 16px 14px;
  }
  .card h2 { margin: 0 0 10px; font-size: 18px; }
  .kvs { display: grid; grid-template-columns: 180px 1fr; gap: 8px 12px; }
  .k { color: var(--muted); }
  code.inline {
   font-family: var(--mono); font-size: 12.5px;
   background: rgba(10,15,24,.75);
   border: 1px solid var(--border);
   padding: 2px 6px; border-radius: 8px;
  }
  pre {
   background: rgba(10,15,24,.88);
   border: 1px solid var(--border);
   border-radius: 14px;
   padding: 12px 12px;
   overflow: auto;
   box-shadow: inset 0 0 0 1px rgba(255,255,255,.02);
   margin: 10px 0 0;
  }
  pre code {
   font-family: var(--mono);
   font-size: 12.5px;
   color: #dbe7ff;
   white-space: pre;
  }
  .note {
   border-left: 3px solid var(--accent2);
   padding: 10px 12px;
   background: rgba(16, 185, 129, .08);
   border-radius: 12px;
   color: var(--text);
  }
  .warn {
   border-left: 3px solid var(--warn);
   padding: 10px 12px;
   background: rgba(251, 191, 36, .08);
   border-radius: 12px;
  }
  .rule {
   border-left: 3px solid var(--accent);
   padding: 10px 12px;
   background: rgba(122, 162, 255, .08);
   border-radius: 12px;
   margin: 10px 0;
  }
  .pill {
   display:inline-block; font-size: 12px; padding: 2px 8px;
   border-radius: 999px; border: 1px solid var(--border);
   background: rgba(15,23,36,.7); color: var(--muted);
   margin-right: 6px;
  }
  details {
   border: 1px solid var(--border);
   background: rgba(15,23,36,.55);
   border-radius: 16px;
   padding: 10px 12px;
   margin: 12px 0;
   box-shadow: 0 8px 22px var(--shadow);
  }
  
summary {
  display: flex;
  align-items: center;
  gap: 10px;
}

.summary-title {
  display: inline-flex;
  align-items: center;
  gap: 8px;
}

.sumhint {
  margin-left: auto;
}

summary {
   cursor: pointer;
   list-style: none;
   font-weight: 600;
   color: var(--text);
   display: flex;
   align-items: center;
   justify-content: space-between;
   gap: 10px;
   padding: 4px 2px;
  }
  summary::-webkit-details-marker { display:none; }
  .sumhint { color: var(--muted); font-weight: 400; font-size: 12px; }
  .split {
   display:grid; grid-template-columns: 1fr 1fr; gap: 12px;
  }
  @media (max-width: 980px) {
   .split { grid-template-columns: 1fr; }
  }
  .mini h3 { margin: 8px 0 8px; font-size: 15px; }
  ul { margin: 8px 0 0 18px; }
  li { margin: 4px 0; }
  hr.sep { border: 0; border-top: 1px solid var(--border); margin: 16px 0; }
  .muted { color: var(--muted); }

  /* Diagram framing (match preview) */
  .diag {
   background: #020617;
   border: 1px solid #334;
   border-radius: 12px;
   padding: 12px;
   overflow: auto;
   margin-top: 10px;
  }
  .diag svg { display: block; background: #020617; border-radius: 10px; }
  .diag details { margin-top: 10px; box-shadow: none; }
  .diag details summary { color: #93c5fd; font-weight: 600; }
 
/* ===== Compact spacing for spec / MUST sections ===== */
details h4 {
  margin: 10px 0 6px;
}

details ul {
  margin: 4px 0 6px 18px;
}

details li {
  margin: 2px 0;
}

code.inline {
  line-height: 1.2;
}

details {
  margin: 10px 0;
  padding: 8px 10px;
}

summary {
  padding: 2px 2px;
}

details pre {
  margin-top: 6px;
}

</style>
</head>
<body>
<div class="wrap">
<header>
<h1>Living Architecture (UI + API) — Canonical <span class="badge">v1.0</span></h1>
<div class="sub">Document canonic pentru arhitectura framework teastare automata UI + API (versiune v1_0).</div>
</header>
<div class="grid">
<div class="card">
<h2>1) Abordare</h2>
<details open="">
<summary>
  <span class="summary-title">Scope &amp; responsabilități</span>
  <span class="badge">CORE</span>
</summary>
<div class="k">Badge</div>
<ul>
  <li><span class="badge">API</span> norme aplicabile direct unui framework API.</li>
  <li><span class="badge">UI</span> norme exclusiv pentru framework-ul UI.</li>
  <li><span class="badge">CORE</span> contracte și infrastructură comune, reutilizate.</li>
  <li><span class="badge">REPORTING</span> subset specializat de CORE, dedicat raportării.</li>
</ul>
<div class="kvs">
<div class="k">Technologii</div>
<div>
<code class="inline">Java 11</code> ·
    <code class="inline">Maven</code> ·
    <code class="inline">TestNG</code> ·
    <code class="inline">RestAssured</code>
</div>
<div class="k">Structură proiect</div>
<div>
proiect Maven, (<code class="inline">src/main</code>, <code class="inline">src/test</code>);   
  </div>
<div class="k">Root package</div>
<div>
<code class="inline">{framework.basePackage}</code> =
    <code class="inline">com.endava.ai</code>
</div>
<div class="k">Config unificată</div>
<div>
<code class="inline">framework.properties</code>
    (<code class="inline">src/main/resources</code>)
  </div>
<div class="k">Model de interacțiune</div>
<div>
<span class="pill">UI</span>
    UIActions+WaitUtils+UIEngine
  </div>
<div class="k">Model de apel</div>
<div>
<span class="pill">API</span>
    ApiClient+Services+Validations 
  </div>
<div class="k">Reporting unificat</div>
<div>
<code class="inline">ReportLogger</code> +
    <code class="inline">ReportingManager</code> +
    <code class="inline">StepLogger</code>
</div>
<div class="k">Reporting engines</div>
<div>
<code class="inline">Extent</code> ·
    <code class="inline">Allure</code>
</div>
</div>
</details>
<hr class="sep">
<details>
<summary><span class="summary-title">Structură canonică de pachete</span> <span class="badge">CORE</span></summary>
<b>MUST</b> toate componentele framework-ului să fie definite sub același <code class="inline">{framework.basePackage}</code> și în același <code class="inline">src</code>.
<ul>
<li>UI root package: <code class="inline">{framework.basePackage}.ui</code></li>
<li>API root package: <code class="inline">{framework.basePackage}.api</code></li>
<li>Core module: <code class="inline">{framework.basePackage}.core</code></li>
<li>Reporting module: <code class="inline">{framework.basePackage}.core.reporting</code></li>
</ul>
<details>
<summary>
  <span class="summary-title">Ierarhie folosită</span>
  <span class="sumhint">core / config / reporting</span>
</summary>
<span class="pill">Core module</span>
<pre><code>
├───config
│       ConfigManager.java
│           
├───listener
│       TestListener.java
│
└───reporting
    │   ReportingManager.java
    │   ReportLogger.java
    │   StepLogger.java
    │
    └───adapters
            AllureAdapter.java
            ExtentAdapter.java</code></pre>
</details>
</details>
<div class="split">
</div>
</div>
<div class="card">
<h2>Configurație centralizată</h2>
<div class="note">
    Valorile de configurare sunt gestionate într-un singur punct și accesate prin <b>ConfigManager</b>.
   </div>
<details open="">
<summary>
  <span class="summary-title">UI — proprietăți <span class="badge">UI</span></span>
  <span class="sumhint">framework.properties</span>
</summary>
<pre><code>base.url=https://practicesoftwaretesting.com
##ui.engine options: selenium, playwright
ui.engine=selenium   
reports.dir=reports
##reporting.engine options: allure, extent
reporting.engine=extent
explicit.wait.seconds=5
reports.timestamp.enabled=true
reports.timestamp.format=yyyy-MM-dd_HH-mm-ss
console.details.enabled=true
</code></pre>
</details>
<details open="">
<summary>
  <span class="summary-title">API — proprietăți <span class="badge">API</span></span>
  <span class="sumhint">framework.properties</span>
</summary>
<pre><code>base.url.api=https://gorest.co.in
reports.dir=reports
##reporting.engine options: allure, extent
reporting.engine=extent
reports.timestamp.enabled=true
reports.timestamp.format=yyyy-MM-dd_HH-mm-ss
console.details.enabled=true # dacă modulul de reporting o suportă
auth.token=
</code></pre>
</details>
</div>
</div>
<hr class="sep">
<div class="card">
<h2>2) Diagrame de arhitectură <span class="badge">CORE</span></h2>
<details><summary>
  <span class="summary-title">2.1 Structura modulelor (static)</span>
  <span class="sumhint">Component</span>
</summary><div class="card">
<div class="diag">


<svg aria-label="Structura modulelor (static)" height="380" viewbox="0 0 980 380" width="980">
<!-- frames -->
<rect fill="#0b1220" height="320" rx="14" stroke="#334" width="300" x="20" y="30"></rect>
<text fill="#9ddcff" font-size="14" x="38" y="58">UI Module</text>
<rect fill="#0b1220" height="320" rx="14" stroke="#334" width="300" x="340" y="30"></rect>
<text fill="#9ddcff" font-size="14" x="358" y="58">API Module</text>
<rect fill="#0b1220" height="320" rx="14" stroke="#334" width="300" x="660" y="30"></rect>
<text fill="#9ddcff" font-size="14" x="678" y="58">Reporting</text>
<!-- UI column -->
<rect fill="#1e293b" height="50" rx="8" width="240" x="50" y="90"></rect>
<text fill="#e6e9ef" text-anchor="middle" x="170" y="126">Tests</text>
<rect fill="#1e293b" height="50" rx="8" width="240" x="50" y="168"></rect>
<text fill="#e6e9ef" text-anchor="middle" x="170" y="204">Services</text>
<rect fill="#1e293b" height="50" rx="8" width="240" x="50" y="246"></rect>
<text fill="#e6e9ef" text-anchor="middle" x="170" y="282">UIActions</text>
<!-- UI arrows -->
<line stroke="#93c5fd" stroke-width="2" x1="170" x2="170" y1="150" y2="168"></line>
<polyline fill="none" points="166,162 170,168 174,162" stroke="#93c5fd" stroke-width="2"></polyline>
<line stroke="#93c5fd" stroke-width="2" x1="170" x2="170" y1="228" y2="246"></line>
<polyline fill="none" points="166,240 170,246 174,240" stroke="#93c5fd" stroke-width="2"></polyline>

<!-- API column -->
<rect fill="#1e293b" height="45" rx="8" width="240" x="370" y="90"></rect>
<text fill="#e6e9ef" text-anchor="middle" x="490" y="126">Tests</text>

<rect fill="#1e293b" height="45" rx="8" width="240" x="370" y="150"></rect>
<text fill="#e6e9ef" text-anchor="middle" x="490" y="186">API Steps</text>

<rect fill="#1e293b" height="45" rx="8" width="240" x="370" y="210"></rect>
<text fill="#e6e9ef" text-anchor="middle" x="490" y="246">Services</text>

<rect fill="#1e293b" height="45" rx="8" width="240" x="370" y="270"></rect>
<text fill="#e6e9ef" text-anchor="middle" x="490" y="306">Validation</text>

<!-- API arrows -->
<line stroke="#93c5fd" stroke-width="2" x1="490" x2="490" y1="150" y2="150"></line>
<polyline fill="none" points="486,144 490,150 494,144" stroke="#93c5fd" stroke-width="2"></polyline>
<line stroke="#93c5fd" stroke-width="2" x1="490" x2="490" y1="210" y2="210"></line>
<polyline fill="none" points="486,204 490,210 494,204" stroke="#93c5fd" stroke-width="2"></polyline>
<line stroke="#93c5fd" stroke-width="2" x1="490" x2="490" y1="270" y2="270"></line>
<polyline fill="none" points="486,264 490,270 494,264" stroke="#93c5fd" stroke-width="2"></polyline>

<!-- Reporting column -->
<!-- Reporting column -->
<rect fill="#1e293b" height="50" rx="8" width="240" x="690" y="90"></rect>
<text fill="#e6e9ef" text-anchor="middle" x="810" y="126">TestListener</text>

<rect fill="#1e293b" height="50" rx="8" width="240" x="690" y="168"></rect>
<text fill="#e6e9ef" text-anchor="middle" x="810" y="204">StepLogger (single entry point)</text>

<rect fill="#1e293b" height="50" rx="8" width="240" x="690" y="246"></rect>
<text fill="#e6e9ef" text-anchor="middle" x="810" y="282">ReportingMgr → ReportLogger → Adapters</text>

<!-- Reporting arrows -->
<line stroke="#93c5fd" stroke-width="2" x1="810" x2="810" y1="140" y2="168"></line>
<polyline fill="none" points="806,162 810,168 814,162" stroke="#93c5fd" stroke-width="2"></polyline>

<line stroke="#93c5fd" stroke-width="2" x1="810" x2="810" y1="218" y2="246"></line>
<polyline fill="none" points="806,240 810,246 814,240" stroke="#93c5fd" stroke-width="2"></polyline>

</svg>

<details>
<summary>
  <span class="summary-title">Explicație</span>
  <span class="sumhint">Structură și responsabilități</span>
</summary>

<h4>Ce ilustrează:</h4>
<ul>
  <li><b>Separarea responsabilităților</b> între componentele UI, API și Reporting, cu testele limitate strict la orchestrarea fluxurilor.</li>
  <li><b>UI</b>: interacțiunile, așteptările și validările sunt izolate de teste și grupate în layere dedicate.</li>
  <li><b>API</b>: fluxurile de business sunt orchestrate prin API Steps, care separă apelurile HTTP și aserțiunile de testele propriu-zise.</li>
  <li><b>Reporting</b>: lifecycle-ul testului și semantica pașilor sunt centralizate și independente de engine-urile UI/API.</li>
</ul>

<h4>De ce este important:</h4>
<ul>
  <li>Permite schimbarea engine-urilor UI, API sau de raportare fără impact asupra testelor.</li>
  <li>Reduce cuplarea și duplicarea logicii prin introducerea unui layer dedicat de orchestrare semantică.</li>
  <li>Asigură un model unitar și predictibil pentru testare și raportare.</li>
</ul>
</details>
</div>
</div></details>

</div>
<hr class="sep">
<div class="card">
<h2>3) Reguli canonice — MUST / MUST NOT <span class="badge">CORE</span></h2>
<details>
<summary>
  <span class="summary-title">3.1 Configurație &amp; integrare reporting <span class="badge">CORE</span></span>
  <span class="sumhint">Contract-driven</span>
</summary>
<h4>Config</h4>
<ul>
  <li><b>MUST</b> toate setările framework-ului să fie definite în <code class="inline">framework.properties</code>.</li>
  <li><b>MUST</b> accesul la configurație să se facă exclusiv prin <code class="inline">ConfigManager</code>.</li>
  <li><b>MUST</b> existe un singur <code class="inline">ConfigManager</code>, localizat în modulul <b>core</b>, utilizat de toate modulele (UI și API).</li>
  <li><b>MUST</b> <code class="inline">ConfigManager</code> să ofere acces pentru citirea valorilor de configurare <code class="inline">require(key)</code> și <code class="inline">get(key, default)</code>.</li>
</ul>
<h4>Integrare reporting</h4>
<ul>
  <li><b>MUST</b> framework-ul să interacționeze cu raportarea exclusiv prin <b>contractul canonic</b> definit în <b>Secțiunea 3.5</b>.</li>
  <li><b>MUST NOT</b> layerele de execuție (UI, API, Validation) să depindă de engine-uri, adaptoare sau mecanisme interne de raportare.</li>
 </ul>
</details>


<details>
<summary>
  <span class="summary-title">3.2 UI: interacțiuni și așteptări <span class="badge">UI</span></span>
  <span class="sumhint">UIActions + UIEngine + WaitUtils</span>
</summary>
<h4>Interacțiuni UI</h4>
<ul>
<li><b>MUST</b> toate interacțiunile UI să fie executate exclusiv prin <code class="inline">UIActions</code>.</li>
<li><b>MUST</b> <code class="inline">UIEngine</code> să expună doar operații de bază (click, type, getText, wait), fără logică de test sau reporting.</li>
<li><b>MUST</b> framework-ul să livreze două implementări concrete de <code class="inline">UIEngine</code> (Selenium și Playwright), selectabile prin configurație.</li>
<li><b>MUST</b> UIEngine-ul activ să standardizeze dimensiunea browser-ului pentru execuție și screenshot-uri (implicit <code class="inline">2560×1440</code>), indiferent de engine.</li>
</ul>
<h4>Așteptări (waits)</h4>
<ul>
<li><b>MUST</b> toate așteptările explicite să fie realizate exclusiv prin <code class="inline">WaitUtils</code>.</li>
<li><b>MUST</b> decizia de a aplica un explicit wait să fie luată în <code class="inline">UIActions</code>, în mod engine-aware.</li>
<li><b>MUST NOT</b> <code class="inline">WaitUtils</code> să emită FAIL direct; FAIL este controlat exclusiv la nivel de step.</li>
</ul>
<h4>Strategie de așteptare dependentă de engine</h4>
<ul>
<li><b>MUST</b> <code class="inline">UIEngine</code> să expună metoda <code class="inline">boolean supportsAutoWait()</code>.</li>
<li><b>MUST</b> engine-urile bazate pe Selenium să returneze <code class="inline">false</code>, iar cele bazate pe Playwright să returneze <code class="inline">true</code>.</li>
<li><b>MUST</b> <code class="inline">UIActions</code> să decidă aplicarea explicit wait înainte de interacțiuni.</li>
</ul>
<pre><code class="language-java">private static void waitIfRequired(String cssSelector) {
  if (!DriverManager.getEngine().supportsAutoWait()) {
    WaitUtils.waitForVisible(cssSelector);
  }
}</code></pre>
</details>
<details>
<summary>
  <span class="summary-title">3.3 Validation Layer <span class="badge">UI</span></span>
  <span class="sumhint">Assertions &amp; verdict</span>
</summary>
<ul>
<li><b>MUST</b> toate aserțiunile să fie realizate exclusiv în Validation Layer.</li>
<li><b>MUST</b> validările să fie expuse prin clase reutilizabile.</li>
<li><b>MAY</b> Validation Layer să creeze pași de tip <em>Validate</em> în raport, folosind <code class="inline">StepLogger</code>.</li>
<li><b>MUST</b> un eșec de validare să marcheze testul ca <em>FAILED</em> fără a opri execuția testelor următoare.</li>
</ul>
</details>
<details>
<summary>
  <span class="summary-title">3.4 API: services <span class="badge">API</span></span>
  <span class="sumhint">Steps → Services → Validation</span>
</summary>

<h4>Test Layer</h4>
<ul>
  <li><b>MUST</b> testele să orchestreze fluxurile de business exclusiv prin API Steps, Factories / Builders și Validators.</li>
  <li><b>MUST NOT</b> testele să execute apeluri HTTP sau să facă raportare; orice utilizare directă a mecanismelor de raportare din Test Layer este interzisă.</li>
</ul>

<h4>API Steps</h4>
<ul>
  <li><b>MUST</b> API Steps să orchestreze fluxuri semantice de business.</li>
  <li><b>MUST</b> API Steps să apeleze Services pentru execuția apelurilor HTTP.</li>
  <li><b>MUST</b> API Steps să apeleze Validation Layer pentru aserțiuni.</li>
  <li><b>MUST NOT</b> API Steps să execute direct apeluri HTTP sau să construiască payload-uri.</li>
</ul>

<h4>Services</h4>
<ul>
  <li><b>MUST</b> Services să definească endpoint-ul prin <code class="inline">basePath</code>.</li>
  <li><b>MUST</b> Services să expună metode de business.</li>
  <li><b>MUST NOT</b> Services să conțină aserțiuni sau validări.</li>
</ul>

<h4>HTTP Execution</h4>
<ul>
  <li><b>MUST</b> execuția apelurilor HTTP să fie delegată unui layer comun reutilizabil.</li>
  <li><b>MUST</b> URL-ul complet să fie construit ca <code class="inline">{base.url.api} + relativePath</code>.</li>
  <li><b>MUST</b> layer-ul de execuție să returneze obiectul <code class="inline">Response</code>.</li>
</ul>

<h4>Request / Response Models</h4>
<ul>
  <li><b>MUST</b> modelele de request să fie construite exclusiv prin Factories sau Builders.</li>
  <li><b>MUST NOT</b> testele sau API Steps să construiască manual payload-uri JSON.</li>
</ul>

<h4>Reporting pentru API</h4>
<ul>
  <li><b>MUST</b> fiecare apel HTTP să fie încapsulat într-un step semantic activ.</li>
  <li><b>MUST</b> detaliile semantice ale apelului (method, path, URL, status) să fie logate în cadrul step-ului activ.</li>
  <li><b>MUST</b> payload-urile HTTP (request și response) să fie logate exclusiv prin contractul canonic de raportare.</li>
  <li><b>MUST</b> payload-urile HTTP să fie formatate ca JSON (pretty-printed) înainte de logare.</li>
</ul>
<h4>Semantică și naming pentru pași API</h4>
<ul>
  <li><b>MUST</b> pașii de apel HTTP să folosească formatul <code class="inline">{HTTP METHOD} {relativePath}</code>
      (ex. <code class="inline">POST /users</code>); URL-ul complet <b>MUST</b> să fie inclus în details.</li>
  <li><b>MUST</b> pașii de validare să exprime așteptările într-un format declarativ <code class="inline">Validate: {expectations}</code>
      (ex. <code class="inline">status=201</code>, <code class="inline">body~=userId</code>, <code class="inline">(JSON) schema...</code>).</li>
  <li><b>MAY</b> detaliile de validare (valori reale, mesaje suplimentare) să fie logate în conținutul step-ului.</li>
</ul>
</details>

<details>

<summary>
  <span class="summary-title">3.5 Contract canonic de raportare<span class="badge">CORE</span></span>
  <span class="sumhint">StepLogger</span>
</summary>

<h4>Principiu</h4>
<ul>
  <li><b>MUST</b> framework-ul să expună un mecanism canonic unic pentru scrierea informațiilor de raportare.</li>
  <li><b>MUST</b> acest mecanism să fie accesibil tuturor layere-lor de execuție (<code class="inline">UIActions</code>, <code class="inline">Services</code>, <code class="inline">Validation</code>).</li>
  <li><b>MUST</b> layerele de execuție să emită informație de raportare exclusiv prin <code class="inline">StepLogger</code>, fără a depinde de engine-uri sau adaptoare concrete.</li>
</ul>
<h4>API canonic – metode obligatorii</h4>
<ul>
  <li><b>MUST</b> exista o metodă pentru inițierea unui pas semantic: <code class="inline">StepLogger.startStep(String title)</code>.</li>
  <li><b>MUST</b> exista o metodă pentru logarea de detalii textuale în cadrul unui pas activ: <code class="inline">StepLogger.logDetail(String detail)</code>.</li>
  <li><b>MUST</b> exista o metodă pentru marcarea unui pas ca reușit: <code class="inline">StepLogger.pass(String message)</code>.</li>
  <li><b>MUST</b> exista o metodă pentru marcarea unui pas ca eșuat: <code class="inline">StepLogger.fail(String message)</code>.</li>
  <li><b>MUST</b> exista o metodă pentru atașarea de conținut structurat sub formă de <b>code block</b>: <code class="inline">StepLogger.logCodeBlock(String content)</code>.</li>
</ul>
<h4>Reguli de utilizare</h4>
<ul>
  <li><b>MUST</b> fiecare pas semantic să fie creat explicit prin <code class="inline">StepLogger.startStep(...)</code>.</li>
  <li><b>MUST</b> un pas să fie finalizat exact o singură dată prin <code class="inline">pass(...)</code> sau <code class="inline">fail(...)</code>.</li>
  <li><b>MUST NOT</b> permite inițierea unui pas nou cât timp există un pas activ.</li>
  <li><b>MUST NOT</b> apela <code class="inline">logDetail(...)</code> sau <code class="inline">logCodeBlock(...)</code> în afara unui pas activ.</li>
</ul>
<h4>Limitări</h4>
<ul>
  <li><b>MUST NOT</b> layerele de execuție (<code class="inline">UIActions</code>, <code class="inline">Services</code>, <code class="inline">Validation</code>) să controleze începutul sau sfârșitul testului.</li>
</ul>

</details>

<details>
<summary>
  <span class="summary-title">3.6 Constrângeri globale<span class="badge">CORE</span></span>
  
</summary>
<ul>
<li><b>MUST</b> toate dependințele framework-ului să fie disponibile la runtime.</li>
<li><b>MUST NOT</b> fie declarate dependințe cu <code class="inline">&lt;scope&gt;test&lt;/scope&gt;</code>.</li>
<li><b>MUST NOT</b> fie utilizate numele de metode <code class="inline">wait</code>, <code class="inline">notify</code>, <code class="inline">notifyAll</code>, <code class="inline">finalize</code>.</li>
<li><b>MUST</b> existe un singur <code class="inline">pom.xml</code> la rădăcina proiectului.</li>
<li><b>MUST NOT</b> fie definite module Maven separate (<code class="inline">&lt;modules&gt;</code>).</li>
</ul>
</details>
</div>

<div class="card"><h2>4) Reporting (motoare, contract și detalii interne) <span class="badge">REPORTING</span></h2><p class="note">Secțiunea aceasta grupează toate detaliile interne despre raportare (motoare <code class="inline">Extent | Allure</code>, adaptoare, diagrame).</p>



<details><summary>
  <span class="summary-title">4.1 Reporting — execution flows &amp; lifecycle</span> <span class="sumhint">Fluxuri, lifecycle, contract</span>  
</summary><details><summary>
  <span class="summary-title">4.1.1 Flux UI → Reporting</span>
  <span class="sumhint">Sequence</span>
</summary><div class="card">
<p class="muted">Fluxul arată cum acțiunile UI devin pași în raport și cum sunt rutate către engine-ul de reporting prin abstractions.</p>
<div class="diag">
<svg aria-label="Flux UI → Reporting" height="250" viewbox="0 0 980 250" width="980">
<defs>
<marker id="arrow" markerheight="10" markerunits="strokeWidth" markerwidth="10" orient="auto" refx="9" refy="3">
<path d="M0,0 L10,3 L0,6 z" fill="#93c5fd"></path>
</marker>
</defs>
<!-- -->
<text fill="#a8b3cf" font-size="12" x="40" y="44"></text>
<rect fill="#1e293b" height="44" rx="10" width="150" x="40" y="60"></rect>
<text fill="#e6e9ef" font-size="13" text-anchor="middle" x="115" y="88">Tests</text>
<rect fill="#1e293b" height="44" rx="10" width="170" x="220" y="60"></rect>
<text fill="#e6e9ef" font-size="13" text-anchor="middle" x="305" y="88">Services</text>
<rect fill="#1e293b" height="44" rx="10" width="170" x="420" y="60"></rect>
<text fill="#e6e9ef" font-size="13" text-anchor="middle" x="505" y="88">UIActions</text>
<!-- lane -->
<text fill="#a8b3cf" font-size="12" x="40" y="142"></text>
<rect fill="#1e293b" height="44" rx="10" width="170" x="420" y="158"></rect>
<text fill="#e6e9ef" font-size="13" text-anchor="middle" x="505" y="186">StepLogger</text>
<rect fill="#1e293b" height="44" rx="10" width="170" x="610" y="158"></rect>
<text fill="#e6e9ef" font-size="13" text-anchor="middle" x="695" y="186">ReportingMgr</text>
<rect fill="#1e293b" height="44" rx="10" width="160" x="800" y="158"></rect>
<text fill="#e6e9ef" font-size="13" text-anchor="middle" x="880" y="186">ReportLogger</text>
<rect fill="#1e293b" height="34" rx="10" width="160" x="800" y="210"></rect>
<text fill="#e6e9ef" font-size="12" text-anchor="middle" x="880" y="232">Extent | Allure</text>
<!-- Arrows (no crossings) -->
<line marker-end="url(#arrow)" stroke="#93c5fd" stroke-width="2" x1="190" x2="220" y1="82" y2="82"></line>
<line marker-end="url(#arrow)" stroke="#93c5fd" stroke-width="2" x1="390" x2="420" y1="82" y2="82"></line>
<!-- Drop to StepLogger -->
<path d="M505 104 C505 122, 505 130, 505 158" fill="none" marker-end="url(#arrow)" stroke="#6ee7b7" stroke-width="2"></path>
<text fill="#a7f3d0" font-size="11" x="520" y="132">step semantics</text>
<line marker-end="url(#arrow)" stroke="#93c5fd" stroke-width="2" x1="590" x2="610" y1="180" y2="180"></line>
<line marker-end="url(#arrow)" stroke="#93c5fd" stroke-width="2" x1="780" x2="800" y1="180" y2="180"></line>
<path d="M880 202 C880 206, 880 206, 880 210" fill="none" marker-end="url(#arrow)" stroke="#93c5fd" stroke-width="2"></path>
</svg>
<details>
<summary>
  <span class="summary-title">Explicație</span>
  <span class="sumhint">transformarea acțiunilor UI în pași raportați</span>
</summary>
<ul>
<li><b>Ce ilustrează:</b> Transformarea unei acțiuni UI într-un pas semantic raportat.</li>
<li><b>Tests:</b> Declanșează acțiuni de nivel înalt, independent de engine-ul UI folosit (Selenium, Playwright).</li>
<li><b>UIActions:</b> Decide dacă este necesar un wait și execută acțiunea prin engine.</li>
<li><b>StepLogger:</b> Creează pasul, loghează detalii și controlează PASS/FAIL.</li>
<li><b>ReportingManager:</b> Selectează adapterul de raportare (Extent / Allure).</li>
<li><b>Regulă cheie:</b> Fiecare pas poate avea un singur FAIL; engine-ul și testele nu fac logging direct.</li>
</ul>
</details>
</div>
</div></details><details><summary>
  <span class="summary-title">4.1.2 Flux API → Reporting</span>
  <span class="sumhint">Sequence</span>
</summary><div class="card">
<p class="muted">Flux simetric: apelurile HTTP și validările devin pași în raport prin același contract (StepLogger → ReportingManager → ReportLogger).</p>
<div class="diag">
<svg aria-label="Flux API → Reporting" height="250" viewbox="0 0 980 250" width="980">
<defs>
<marker id="arrow2" markerheight="10" markerunits="strokeWidth" markerwidth="10" orient="auto" refx="9" refy="3">
<path d="M0,0 L10,3 L0,6 z" fill="#93c5fd"></path>
</marker>
</defs>
<!-- -->
<text fill="#a8b3cf" font-size="12" x="40" y="44"></text>
<rect fill="#1e293b" height="44" rx="10" width="150" x="40" y="60"></rect>
<text fill="#e6e9ef" font-size="13" text-anchor="middle" x="115" y="88">Tests</text>
<rect fill="#1e293b" height="44" rx="10" width="180" x="220" y="60"></rect>
<text fill="#e6e9ef" font-size="13" text-anchor="middle" x="310" y="88">Services</text>
<rect fill="#1e293b" height="44" rx="10" width="180" x="430" y="60"></rect>
<text fill="#e6e9ef" font-size="13" text-anchor="middle" x="520" y="88">Validation</text>
<!-- lane -->
<text fill="#a8b3cf" font-size="12" x="40" y="142"></text>
<rect fill="#1e293b" height="44" rx="10" width="180" x="430" y="158"></rect>
<text fill="#e6e9ef" font-size="13" text-anchor="middle" x="520" y="186">StepLogger</text>
<rect fill="#1e293b" height="44" rx="10" width="170" x="630" y="158"></rect>
<text fill="#e6e9ef" font-size="13" text-anchor="middle" x="715" y="186">ReportingMgr</text>
<rect fill="#1e293b" height="44" rx="10" width="140" x="820" y="158"></rect>
<text fill="#e6e9ef" font-size="13" text-anchor="middle" x="890" y="186">ReportLogger</text>
<rect fill="#1e293b" height="34" rx="10" width="140" x="820" y="210"></rect>
<text fill="#e6e9ef" font-size="12" text-anchor="middle" x="890" y="232">Extent | Allure</text>
<!-- Arrows (no crossings) -->
<line marker-end="url(#arrow2)" stroke="#93c5fd" stroke-width="2" x1="190" x2="220" y1="82" y2="82"></line>
<line marker-end="url(#arrow2)" stroke="#93c5fd" stroke-width="2" x1="400" x2="430" y1="82" y2="82"></line>
<!-- Drop to StepLogger -->
<path d="M520 104 C520 122, 520 130, 520 158" fill="none" marker-end="url(#arrow2)" stroke="#6ee7b7" stroke-width="2"></path>
<text fill="#a7f3d0" font-size="11" x="538" y="132">step semantics</text>
<line marker-end="url(#arrow2)" stroke="#93c5fd" stroke-width="2" x1="610" x2="630" y1="180" y2="180"></line>
<line marker-end="url(#arrow2)" stroke="#93c5fd" stroke-width="2" x1="800" x2="820" y1="180" y2="180"></line>
<path d="M890 202 C890 206, 890 206, 890 210" fill="none" marker-end="url(#arrow2)" stroke="#93c5fd" stroke-width="2"></path>
</svg>
<details>
<summary>
  <span class="summary-title">Explicație</span>
  <span class="sumhint">raportare unificată pentru API</span>
</summary>
<ul>
<li><b>Ce ilustrează:</b> Transformarea apelurilor HTTP și a validărilor în pași raportați.</li>
<li><b>Services:</b> Execută apelurile HTTP prin ApiClient.</li>
<li><b>Validation:</b> Rulează aserțiunile exclusiv în pași logați.</li>
<li><b>StepLogger:</b> Asigură o semantică de logging unitară.</li>
<li><b>Beneficiu:</b> Toate testele folosesc același model de raportare.</li>
</ul>
</details>
</div>
</div></details><details>
<summary>
  <span class="summary-title">4.1.3 Flux TestNG + StepLogger (reguli de eșec)</span>
  <span class="sumhint">Sequence</span>
</summary>
<div class="diag">
<!-- SVG: sequence diagram (style aligned to preview) -->
<svg aria-label="TestNG + StepLogger flow" height="420" viewbox="0 0 980 420" width="980">
<defs>
<marker id="arrow2" markerheight="10" markerunits="strokeWidth" markerwidth="10" orient="auto" refx="9" refy="3">
<path d="M0,0 L10,3 L0,6 z" fill="#93c5fd"></path>
</marker>
<marker id="arrowFail" markerheight="10" markerunits="strokeWidth" markerwidth="10" orient="auto" refx="9" refy="3">
<path d="M0,0 L10,3 L0,6 z" fill="#f87171"></path>
</marker>
</defs>
<!-- lifeline labels -->
<text fill="#9ddcff" font-size="14" x="90" y="34">TestNG</text>
<text fill="#9ddcff" font-size="14" x="270" y="34">TestListener</text>
<text fill="#9ddcff" font-size="14" x="470" y="34">StepLogger</text>
<text fill="#9ddcff" font-size="14" x="650" y="34">ReportingManager</text>
<text fill="#9ddcff" font-size="14" x="840" y="34">ReportLogger</text>
<!-- lifelines -->
<line stroke="#334" x1="90" x2="90" y1="54" y2="390"></line>
<line stroke="#334" x1="270" x2="270" y1="54" y2="390"></line>
<line stroke="#334" x1="470" x2="470" y1="54" y2="390"></line>
<line stroke="#334" x1="650" x2="650" y1="54" y2="390"></line>
<line stroke="#334" x1="840" x2="840" y1="54" y2="390"></line>
<!-- messages -->
<line stroke="#93c5fd" stroke-width="2" x1="90" x2="270" y1="92" y2="92"></line><polygon fill="#93c5fd" points="270.00,92.00 260.00,98.00 260.00,86.00" stroke="#93c5fd" stroke-width="2"></polygon>
<text fill="#e6e9ef" font-size="12" text-anchor="middle" x="180" y="82">onTestStart()</text>
<line stroke="#93c5fd" stroke-width="2" x1="270" x2="650" y1="130" y2="130"></line><polygon fill="#93c5fd" points="650.00,130.00 640.00,136.00 640.00,124.00" stroke="#93c5fd" stroke-width="2"></polygon>
<text fill="#e6e9ef" font-size="12" text-anchor="middle" x="460" y="120">getLogger()</text>
<line stroke="#93c5fd" stroke-width="2" x1="650" x2="840" y1="160" y2="160"></line><polygon fill="#93c5fd" points="840.00,160.00 830.00,166.00 830.00,154.00" stroke="#93c5fd" stroke-width="2"></polygon>
<text fill="#e6e9ef" font-size="12" text-anchor="middle" x="745" y="150">resolve by reporting.engine</text>
<line stroke="#93c5fd" stroke-width="2" x1="270" x2="840" y1="196" y2="196"></line><polygon fill="#93c5fd" points="840.00,196.00 830.00,202.00 830.00,190.00" stroke="#93c5fd" stroke-width="2"></polygon>
<text fill="#e6e9ef" font-size="12" text-anchor="middle" x="555" y="186">startTest(name, desc)</text>
<line stroke="#93c5fd" stroke-width="2" x1="270" x2="470" y1="228" y2="228"></line><polygon fill="#93c5fd" points="470.00,228.00 460.00,234.00 460.00,222.00" stroke="#93c5fd" stroke-width="2"></polygon>
<text fill="#e6e9ef" font-size="12" text-anchor="middle" x="370" y="218">markTestStarted()</text>
<line stroke="#93c5fd" stroke-width="2" x1="90" x2="470" y1="266" y2="266"></line><polygon fill="#93c5fd" points="470.00,266.00 460.00,272.00 460.00,260.00" stroke="#93c5fd" stroke-width="2"></polygon>
<text fill="#e6e9ef" font-size="12" text-anchor="middle" x="280" y="256">startStep(title) / logDetail(...)</text>
<line stroke="#f87171" stroke-width="2" x1="470" x2="840" y1="298" y2="298"></line><polygon fill="#f87171" points="840.00,298.00 830.00,304.00 830.00,292.00" stroke="#f87171" stroke-width="2"></polygon>
<text fill="#fca5a5" font-size="12" text-anchor="middle" x="655" y="288">fail(msg, stacktraceText) (o singură dată)</text>
</svg>
<details>
<summary>
  <span class="summary-title">Explicație</span>
  <span class="sumhint">Lifecycle test și reguli de eșec</span>
</summary>
<ul>
<li><b>Ce ilustrează:</b> Separarea responsabilităților dintre lifecycle-ul testului și semantica pașilor raportați.</li>
<li><b>Separarea responsabilităților:</b>
<ul>
<li><b>TestListener:</b> gestionează începutul și sfârșitul testului (evenimente TestNG) și creează/închide contextul de raportare la nivel de test.</li>
<li><b>StepLogger:</b> definește pasul semantic și controlează raportarea corectă, fiind singurul care poate emite FAIL într-un pas.</li>
</ul>
</li>
<li><b>Reguli implicite ale diagramei:</b>
<div class="rule">
<ul>
<li><b>MUST</b> un pas să poată avea un singur FAIL.</li>
<li><b>MUST</b> detaliile să fie logate exclusiv în interiorul unui pas activ.</li>
<li><b>MUST</b> orice excepție apărută în afara pașilor să producă FAIL la nivel de test.</li>
<li><b>MUST NOT</b> permite apeluri <code class="inline">StepLogger.logDetail(...)</code> în afara unui step activ.</li>
</ul>
</div>
</li>
</ul>
</details>
</div>
</details><details>
<summary>
  <span class="summary-title">4.1.4 Lifecycle TestNG + reporting (UI)</span>
  <span class="sumhint">Sequence</span>
</summary>
<div class="diag">
<svg aria-label="UI lifecycle with screenshot" height="420" viewbox="0 0 980 420" width="980">
<defs>
<marker id="arrow3" markerheight="10" markerunits="strokeWidth" markerwidth="10" orient="auto" refx="9" refy="3">
<path d="M0,0 L10,3 L0,6 z" fill="#93c5fd"></path>
</marker>
</defs>
<text fill="#9ddcff" font-size="14" x="70" y="34">TestNG</text>
<text fill="#9ddcff" font-size="14" x="220" y="34">TestListener</text>
<text fill="#9ddcff" font-size="14" x="400" y="34">StepLogger</text>
<text fill="#9ddcff" font-size="14" x="580" y="34">ReportingManager</text>
<text fill="#9ddcff" font-size="14" x="770" y="34">ReportLogger</text>
<text fill="#9ddcff" font-size="14" x="910" y="34">Driver</text>
<line stroke="#334" x1="70" x2="70" y1="54" y2="390"></line>
<line stroke="#334" x1="220" x2="220" y1="54" y2="390"></line>
<line stroke="#334" x1="400" x2="400" y1="54" y2="390"></line>
<line stroke="#334" x1="580" x2="580" y1="54" y2="390"></line>
<line stroke="#334" x1="770" x2="770" y1="54" y2="390"></line>
<line stroke="#334" x1="910" x2="910" y1="54" y2="390"></line>
<line marker-end="url(#arrow3)" stroke="#93c5fd" stroke-width="2" x1="70" x2="220" y1="90" y2="90"></line>
<text fill="#e6e9ef" font-size="12" text-anchor="middle" x="145" y="80">onTestStart()</text>
<line marker-end="url(#arrow3)" stroke="#93c5fd" stroke-width="2" x1="220" x2="580" y1="120" y2="120"></line>
<text fill="#e6e9ef" font-size="12" text-anchor="middle" x="400" y="110">getLogger()</text>
<line marker-end="url(#arrow3)" stroke="#93c5fd" stroke-width="2" x1="220" x2="770" y1="150" y2="150"></line>
<text fill="#e6e9ef" font-size="12" text-anchor="middle" x="495" y="140">startTest(name, desc)</text>
<line marker-end="url(#arrow3)" stroke="#93c5fd" stroke-width="2" x1="220" x2="400" y1="180" y2="180"></line>
<text fill="#e6e9ef" font-size="12" text-anchor="middle" x="310" y="170">markTestStarted()</text>
<line marker-end="url(#arrow3)" stroke="#93c5fd" stroke-width="2" x1="70" x2="400" y1="220" y2="220"></line>
<text fill="#e6e9ef" font-size="12" text-anchor="middle" x="235" y="210">startStep / logDetail / pass</text>
<line marker-end="url(#arrow3)" stroke="#93c5fd" stroke-width="2" x1="70" x2="220" y1="270" y2="270"></line>
<text fill="#e6e9ef" font-size="12" text-anchor="middle" x="145" y="260">onTestFailure()</text>
<line marker-end="url(#arrow3)" stroke="#93c5fd" stroke-width="2" x1="220" x2="910" y1="300" y2="300"></line>
<text fill="#e6e9ef" font-size="12" text-anchor="middle" x="565" y="290">captureScreenshotAsBase64()</text>
<line marker-end="url(#arrow3)" stroke="#93c5fd" stroke-width="2" x1="220" x2="770" y1="332" y2="332"></line>
<text fill="#e6e9ef" font-size="12" text-anchor="middle" x="495" y="322">attachScreenshotBase64(base64, title) (TEST-level)</text>
<line marker-end="url(#arrow3)" stroke="#93c5fd" stroke-width="2" x1="220" x2="770" y1="362" y2="362"></line>
<text fill="#e6e9ef" font-size="12" text-anchor="middle" x="495" y="352">endTest(FAIL) + clearTestStarted()</text>
</svg>
<details>
<summary>
  <span class="summary-title">Explicație</span>
  <span class="sumhint">screenshot și eșec UI</span>
</summary>
<ul>
<li><b>Ce ilustrează:</b> execuția unui test UI cu mecanism de reporting reutilizat.</li>

<li><b>Pași în testele UI:</b>
  <ul>
    <li><b>UIActions</b> execută interacțiuni UI și creează pași semantici.</li>
    <li><b>Detalii</b> despre locator, value și wait sunt logate în pas.</li>
    <li><b>Screenshot</b> este atașat o singură dată la FAIL, la nivel de test.</li>
  </ul>
</li>

</ul>

</details>
</div>
</details><details>
<summary>
  <span class="summary-title">4.1.5 Lifecycle TestNG + reporting (API)</span>
  <span class="sumhint">Sequence</span>
</summary>
<div class="diag">
<svg aria-label="API shared reporting lifecycle" height="400" viewbox="0 0 980 400" width="980">
<defs>
<marker id="arrow4" markerheight="10" markerunits="strokeWidth" markerwidth="10" orient="auto" refx="9" refy="3">
<path d="M0,0 L10,3 L0,6 z" fill="#93c5fd"></path>
</marker>
</defs>
<text fill="#9ddcff" font-size="14" x="70" y="34">TestNG</text>
<text fill="#9ddcff" font-size="14" x="220" y="34">Listener</text>
<text fill="#9ddcff" font-size="14" x="360" y="34">Services</text>
<text fill="#9ddcff" font-size="14" x="520" y="34">Validation</text>
<text fill="#9ddcff" font-size="14" x="700" y="34">StepLogger</text>
<text fill="#9ddcff" font-size="14" x="860" y="34">ReportLogger</text>
<line stroke="#334" x1="70" x2="70" y1="54" y2="370"></line>
<line stroke="#334" x1="220" x2="220" y1="54" y2="370"></line>
<line stroke="#334" x1="360" x2="360" y1="54" y2="370"></line>
<line stroke="#334" x1="520" x2="520" y1="54" y2="370"></line>
<line stroke="#334" x1="700" x2="700" y1="54" y2="370"></line>
<line stroke="#334" x1="860" x2="860" y1="54" y2="370"></line>
<line marker-end="url(#arrow4)" stroke="#93c5fd" stroke-width="2" x1="70" x2="220" y1="92" y2="92"></line>
<text fill="#e6e9ef" font-size="12" text-anchor="middle" x="145" y="82">onTestStart()</text>
<line marker-end="url(#arrow4)" stroke="#93c5fd" stroke-width="2" x1="220" x2="860" y1="124" y2="124"></line>
<text fill="#e6e9ef" font-size="12" text-anchor="middle" x="540" y="114">startTest(...)</text>
<line marker-end="url(#arrow4)" stroke="#93c5fd" stroke-width="2" x1="220" x2="700" y1="156" y2="156"></line>
<text fill="#e6e9ef" font-size="12" text-anchor="middle" x="460" y="146">markTestStarted()</text>
<line marker-end="url(#arrow4)" stroke="#93c5fd" stroke-width="2" x1="70" x2="360" y1="200" y2="200"></line>
<text fill="#e6e9ef" font-size="12" text-anchor="middle" x="215" y="190">call flow</text>
<line marker-end="url(#arrow4)" stroke="#93c5fd" stroke-width="2" x1="360" x2="700" y1="232" y2="232"></line>
<text fill="#e6e9ef" font-size="12" text-anchor="middle" x="530" y="222">startStep("HTTP ...") + logDetail(...)</text>
<line marker-end="url(#arrow4)" stroke="#93c5fd" stroke-width="2" x1="360" x2="860" y1="264" y2="264"></line>
<text fill="#e6e9ef" font-size="12" text-anchor="middle" x="610" y="254">logCodeBlock(payload) (via ReportingManager.getLogger())</text>
<line marker-end="url(#arrow4)" stroke="#93c5fd" stroke-width="2" x1="70" x2="520" y1="304" y2="304"></line>
<text fill="#e6e9ef" font-size="12" text-anchor="middle" x="295" y="294">assertions</text>
<line marker-end="url(#arrow4)" stroke="#93c5fd" stroke-width="2" x1="520" x2="700" y1="336" y2="336"></line>
<text fill="#e6e9ef" font-size="12" text-anchor="middle" x="610" y="326">startStep("Validate ...") + pass/fail (single)</text>
</svg>
<details>
<summary>
  <span class="summary-title">Explicație</span>
  <span class="sumhint">API cu reporting partajat</span>
</summary>
<ul>
<li><b>Ce ilustrează:</b> execuția unui test API cu mecanism de reporting reutilizat.</li>
<li><b>Pași în testele API:</b>
<ul>
<li><b>Services</b> execută request-uri HTTP și creează pași HTTP …, cu metoda, path-ul, URL-ul și parametrii relevanți.</li>
<li><b>Payload-uri</b> (request/response) sunt atașate ca code block în raport.</li>
<li><b>Validations</b> rulează aserțiuni în pași separați, distinct de pașii de apel HTTP.</li>
</ul>
</li>
<div class="rule">
<ul>
<li><b>MUST</b> apelurile HTTP să fie raportate în pași separați.</li>
<li><b>MUST</b> validările să fie raportate în pași diferiți față de apelurile HTTP.</li>
</ul>
</div>
</ul>
</details>
</div>
</details><details>
<summary>
  <span class="summary-title">4.1.6 Structura nodurilor în raport</span>
  <span class="sumhint">UX model</span>
</summary>
<div class="diag">
<svg aria-label="Report node structure" height="300" viewbox="0 0 980 300" width="980">
<defs>
<marker id="arrow5" markerheight="10" markerunits="strokeWidth" markerwidth="10" orient="auto" refx="9" refy="3">
<path d="M0,0 L10,3 L0,6 z" fill="#93c5fd"></path>
</marker>
</defs>
<rect fill="#1e293b" height="46" rx="10" width="200" x="40" y="40"></rect><text fill="#e6e9ef" font-size="13" text-anchor="middle" x="140" y="69">Test Node</text>
<rect fill="#1e293b" height="46" rx="10" width="200" x="540" y="40"></rect><text fill="#e6e9ef" font-size="13" text-anchor="middle" x="640" y="69">Screenshot (FAIL)</text>
<rect fill="#1e293b" height="46" rx="10" width="200" x="40" y="130"></rect><text fill="#e6e9ef" font-size="13" text-anchor="middle" x="140" y="159">Step Node (collapsible)</text>
<rect fill="#1e293b" height="46" rx="10" width="200" x="290" y="130"></rect><text fill="#e6e9ef" font-size="13" text-anchor="middle" x="390" y="159">Details</text>
<rect fill="#1e293b" height="46" rx="10" width="200" x="540" y="130"></rect><text fill="#e6e9ef" font-size="13" text-anchor="middle" x="640" y="159">Payloads (code)</text>
<rect fill="#1e293b" height="46" rx="10" width="200" x="290" y="220"></rect><text fill="#e6e9ef" font-size="13" text-anchor="middle" x="390" y="249">PASS / FAIL</text>
<rect fill="#1e293b" height="46" rx="10" width="200" x="540" y="220"></rect><text fill="#e6e9ef" font-size="13" text-anchor="middle" x="640" y="249">Stacktrace (step only)</text>
<line marker-end="url(#arrow5)" stroke="#93c5fd" stroke-width="2" x1="240" x2="540" y1="63" y2="63"></line>
<line marker-end="url(#arrow5)" stroke="#93c5fd" stroke-width="2" x1="140" x2="140" y1="86" y2="130"></line>
<line marker-end="url(#arrow5)" stroke="#93c5fd" stroke-width="2" x1="240" x2="290" y1="153" y2="153"></line>
<line marker-end="url(#arrow5)" stroke="#93c5fd" stroke-width="2" x1="490" x2="540" y1="153" y2="153"></line>
<line marker-end="url(#arrow5)" stroke="#93c5fd" stroke-width="2" x1="390" x2="390" y1="176" y2="220"></line>
<line marker-end="url(#arrow5)" stroke="#93c5fd" stroke-width="2" x1="490" x2="540" y1="243" y2="243"></line>
</svg>
<details>
<summary>
  <span class="summary-title">Explicație</span>
  <span class="sumhint">contractul raportului</span>
</summary>
<ul>
<li><b>Ce ilustrează:</b> definește “contractul” raportului: unde se pune fiecare categorie de informație, ca raportul să fie <i>scanabil</i> și fără duplicări.</li>
<div class="rule">
<ul>
<li><b>Test Node</b> conține numele testului, descrierea și statusul final.</li>
<li><b>Test Node</b> nu conține stacktrace sau payload-uri.</li>
<li><b>Step Node</b> conține titlu semantic, detalii, payload-uri și rezultatul pasului.</li>
<li><b>Stacktrace</b> apare o singură dată, exclusiv în pasul care a eșuat.</li>
</ul>
</div>
<div class="note">
<b>Set minim de detalii recomandate (standardizare):</b>
<div class="split">
<div class="mini">
<h3>UI step — details</h3>
<ul>
<li><code class="inline">locator=cssSelector</code></li>
<li><code class="inline">value=...</code> (pentru type/select)</li>
<li><code class="inline">wait=visible/clickable</code> (dacă s-a aplicat explicit)</li>
</ul>
</div>
<div class="mini">
<h3>API step — details</h3>
<ul>
<li><code class="inline">method=POST</code>, <code class="inline">path=/public/v2/users</code></li>
<li><code class="inline">url=https://.../public/v2/users</code></li>
<li><code class="inline">status=201</code> (după primirea răspunsului)</li>
</ul>
</div>
</div>
</div>
</ul></details>
</div>
<div class="rule">
<b>Regulă:</b> stacktrace-ul apare o singură dată, numai în step-ul care a picat. Test node-ul nu primește stacktrace.
   </div>
</details></details>


<!---------------------------------------------------------->

<details>
<summary>
  <span class="summary-title">4.2 Reporting: engines &amp; adapters</span>
  <span class="sumhint">Extent / Allure</span>
</summary>

<ul>
  <li><b>MUST</b> selecția engine-ului de raportare să fie controlată exclusiv de <code class="inline">ReportingManager</code>, pe baza proprietății <code class="inline">reporting.engine</code>.</li>
  <li><b>MUST</b> adaptoarele de raportare să implementeze interfața <code class="inline">ReportLogger</code>.</li>
  <li><b>MUST</b> adaptoarele de raportare să fie accesate exclusiv prin <code class="inline">ReportingManager</code>.</li>
  <li><b>MUST NOT</b> testele, serviciile sau validările să apeleze direct adaptoare de raportare.</li>
  <li><b>MUST</b> adaptoarele inactive să fie NO-OP și să nu arunce excepții.</li>
</ul>

<div class="note">
<b>Reguli engine-specific:</b>
<ul>
  <li><b>Extent</b>: metodele <code class="inline">startTest</code>, <code class="inline">endTest</code> și <code class="inline">flush</code> sunt utilizate pentru controlul explicit al lifecycle-ului testului.</li>
  <li><b>Allure</b>: lifecycle-ul testului este controlat de <code class="inline">AllureTestNg</code>, iar metodele de lifecycle din <code class="inline">ReportLogger</code> sunt tratate ca NO-OP.</li>
  <li><b>Allure</b>: ordinea listener-ilor este obligatorie (<code class="inline">AllureTestNg</code> înainte de <code class="inline">TestListener</code>) pentru atașarea corectă a artifactelor și închiderea testului.</li>
</ul>
</div>

</details>
<details>
<summary>
  <span class="summary-title">4.3 Logging &amp; semantică de pași</span>
  <span class="sumhint">StepLogger + TestListener</span>
</summary>

<div class="rule">
Regulile din această secțiune (<b>4.3 Logging &amp; semantică de pași</b>) se aplică exclusiv layere-lor de execuție
(<code class="inline">UIActions</code>, <code class="inline">Services</code>, <code class="inline">Validation</code>).
<b>Test Layer</b> nu este un consumer valid de <code class="inline">StepLogger</code>.
</div>

<h4>Aplicarea regulilor canonice pentru pași</h4>
<ul>
  <li><b>MUST</b> fiecare pas semantic să fie inițiat explicit prin <code class="inline">StepLogger.startStep(...)</code>.</li>
  <li><b>MUST</b> <code class="inline">StepLogger</code> să fie singurul mecanism care poate marca un pas ca <code class="inline">FAIL</code>.</li>
  <li><b>MUST</b> fiecare pas să aibă exact un rezultat final (<code class="inline">PASS</code> sau <code class="inline">FAIL</code>).</li>
  <li><b>MUST NOT</b> permite inițierea unui pas nou cât timp există un pas activ.</li>
</ul>
<h4>Detalii și excepții</h4>
<ul>
  <li><b>MUST</b> pașii să fie creați doar în contextul unui test activ.</li>
  <li><b>MUST</b> apelurile <code class="inline">logDetail(...)</code>, <code class="inline">pass(...)</code> și <code class="inline">fail(...)</code> să fie realizate exclusiv în interiorul unui pas activ.</li>
  <li><b>MUST</b> orice excepție apărută în afara unui pas activ să producă <code class="inline">FAIL</code> la nivel de test, gestionat prin <code class="inline">TestListener</code>.</li>
</ul>
<h4>Stacktrace și screenshot</h4>
<ul>
  <li><b>MUST</b> stacktrace-ul să fie raportat o singură dată, exclusiv în pasul care a eșuat, sub formă de <b>code block</b>.</li>
  <li><b>MUST</b> screenshot-ul să fie capturat exclusiv din <code class="inline">TestListener</code>, o singură dată per test <code class="inline">FAIL</code>, la nivel de test.</li>
</ul>

<h4>Logging în consolă</h4>
<ul>
  <li><b>MUST</b> logging-ul în consolă să fie realizat exclusiv prin <code class="inline">StepLogger</code>.</li>
  <li><b>MUST</b> fiecare pas să fie afișat cu un titlu semantic pe o linie distinctă.</li>
  <li><b>MUST</b> detaliile unui pas să fie afișate indentat, câte un element pe linie.</li>
  <li><b>MUST</b> rezultatul pasului să fie afișat pe ultima linie, cu status vizual (<code class="inline">PASS</code> / <code class="inline">FAIL</code>).</li>
  <li><b>MAY</b> detaliile să fie omise dacă <code class="inline">console.details.enabled=false</code>.</li>
</ul>
<details>
<summary>
  <span class="summary-title">Exemplu UI</span>
  <span class="sumhint">Interacțiune</span>
</summary>
<pre><code>▶ Type into element: Email
  • locator=input[data-test='email']
  • value=test@example.com
  ✅ PASS: Typed</code></pre>
</details>

<details>
<summary>
  <span class="summary-title">Exemplu API</span>
  <span class="sumhint">Request + Validare</span>
</summary>
<pre><code>▶ POST /public/v2/users
  • method=POST
  • url=https://gorest.co.in/public/v2/users
  • request.body={...}
  • response.status=201
  • response.body={...}
  ✅ PASS: Call completed
▶ Validate status: expect 201
  • actual=201
  ✅ PASS: Validated</code></pre>
</details>

</details>
<details>
<summary>
  <span class="summary-title">4.4 Reporting: extensibilitate &amp; operare</span>
  <span class="sumhint">Engines &amp; mentenanță</span>
</summary>

<h4>Extensibilitate</h4>
<ul>
  <li><b>MUST</b> orice engine de raportare să fie integrat exclusiv printr-un adapter care implementează <code class="inline">ReportLogger</code>.</li>
  <li><b>MUST</b> selecția și instanțierea engine-ului să fie controlate exclusiv de <code class="inline">ReportingManager</code>.</li>
  <li><b>MUST NOT</b> fi necesare modificări în testele sau layerele de execuție pentru a adăuga un engine nou.</li>
</ul>

<h4>Fail-safety</h4>
<ul>
  <li><b>MUST</b> engine-urile indisponibile sau invalide să degradeze sigur prin comportament NO-OP.</li>
  <li><b>MUST</b> raportarea să nu întrerupă execuția testelor.</li>
</ul>

<h4>Operare</h4>
<ul>
  <li><b>MUST</b> ordinea listener-ilor engine-urilor externe să fie respectată conform cerințelor engine-ului.</li>
  <li><b>MUST NOT</b> testele sau layerele de execuție să interacționeze direct cu engine-uri sau adaptoare.</li>
</ul>

<h4>Obiectiv</h4>
<ul>
  <li><b>MUST</b> arhitectura de raportare să permită schimbarea engine-urilor fără impact asupra testelor.</li>
</ul>

</details>


<hr class="sep">
<div class="card">
  <h2>5) Organizare și cerințe de test </h2>
  <details>
    <summary>
      <span class="summary-title">Reguli: testele UI</span>
      <span class="badge">UI</span>
    </summary>
    <div class="details-body">
      <ul>
        <li><b>Target UI (config):</b> <code>{base.url}</code> = <code>https://practicesoftwaretesting.com</code></li>
        <li><b>Pagină de înregistrare (MUST):</b> <code>{base.url}/auth/register</code>
            (ex.: <code>https://practicesoftwaretesting.com/auth/register</code>)</li>
      </ul>
      <ul>
        <li><b>MUST</b> minim: 1 test pozitiv + 3 negative</li>
        <li><b>MUST</b> navigare obligatorie: <code>{base.url}/auth/register</code></li>
        <li><b>MUST</b> layering: <code>Tests → Services → Pages / Validation</code></li>
        <li><b>MUST NOT</b> acces direct la UI engine</li>
      </ul>
      <details>
        <summary>
          <span class="summary-title">Detalii suplimentare</span>
          <span class="badge">UI</span>
        </summary>
        <h4>Locatori</h4>
        <ul>
          <li><b>CSS selectors</b> MUST be used.</li>
          <li><b>XPath</b> ONLY when CSS cannot express text matching.</li>
        </ul>
        <pre><code>button[data-test='submit']
xpath: //button[text()='Register']</code></pre>
        <h4>Date de test</h4>
        <ul>
          <li>Toate datele de test MUST fie JSON sub <code class="inline">src/test/resources/testdata</code>.</li>
          <li>Datele unice MUST fi generate prin <code class="inline">DataGenerator</code>.</li>
        </ul>
      </details>
      <details>
        <summary>
          <span class="summary-title">Reguli: Listeners &amp; BaseTestUI</span>
          <span class="badge">UI</span>
        </summary>
		<ul>
		  <li><b>MUST</b> exista o clasă de bază canonică denumită <code class="inline">BaseTestUI</code>.</li>
		  <li><b>MUST</b> toate clasele de test (UI) extind <code class="inline">BaseTestUI</code>.</li>
		  <li><b>MUST</b> <code class="inline">BaseTestUI</code> declară listener-ele prin
			  <code class="inline">@Listeners</code>, în ordinea:
			  <code class="inline">AllureTestNg</code>,
			  <code class="inline">TestListener</code>.</li>
		  <li><b>MUST</b> inițializarea infrastructurii comune se realizează o singură dată per clasă, prin <code class="inline">@BeforeClass(alwaysRun = true)</code>.</li>
		</ul>
        <pre><code>@Listeners({
    io.qameta.allure.testng.AllureTestNg.class,
    com.endava.ai.core.TestListener.class
})
public abstract class BaseTestUI {

  @BeforeMethod(alwaysRun = true)
  public void setUp() {
    DriverManager.initEngine();
  }

  @AfterMethod(alwaysRun = true)
  public void tearDown() {
    DriverManager.quitEngine();
  }
}</code></pre>
      </details>
    </div>
  </details>
  <details>
    <summary>
      <span class="summary-title">Reguli: testele API</span>
      <span class="badge">API</span>
    </summary>
    <div class="details-body">      <ul>
        <li><b>Target API (config):</b> <code>{base.url.api}</code> = <code>https://gorest.co.in</code></li>
      </ul>
      <ul>
        <li><b>MUST</b> teste complet independente (ordine irelevantă)</li>
        <li><b>MUST</b> cleanup pentru datele create</li>
        <li><b>MUST</b> GET / UPDATE / DELETE: fiecare test își creează entitatea în setup</li>
        <li><b>MUST</b> ierarhie: Positive / Negative / End-to-end</li>
        <li><b>MUST</b> E2E: Create → Get → Update → Delete → Verify deletion</li>
        <li><b>MUST</b> JSON Schema validation în pași logați</li>
      </ul>
      <details>
        <summary>
          <span class="summary-title">MUST: Fiecare endpoint API trebuie testat</span>
          <span class="badge">API</span>
        </summary>
        <pre><code>POST   /public/v2/users            -&gt; expect 201
GET    /public/v2/users/{user_id}  -&gt; expect 200
PUT    /public/v2/users/{user_id}  -&gt; expect 200/201
PATCH  /public/v2/users/{user_id}  -&gt; expect 200/201
DELETE /public/v2/users/{user_id}  -&gt; expect 204</code></pre>
      </details>
      <details>
        <summary>
          <span class="summary-title">Reguli: Autentificare &amp; autorizare</span>
          <span class="badge">API</span>
        </summary>
        <ul>
          <li><b>MUST</b> token-ul să fie definit în config (<code class="inline">auth.token</code>).</li>
          <li><b>MUST</b> autentificarea să fie gestionată centralizat.</li>
          <li><b>MUST NOT</b> testele să construiască manual headere de autentificare.</li>
        </ul>
      </details>
      <details>
        <summary>
          <span class="summary-title">Reguli: Listeners &amp; BaseTestAPI</span>
          <span class="badge">API</span>
        </summary>
		<ul>
		  <li><b>MUST</b> exista o clasă de bază canonică denumită <code class="inline">BaseTestAPI</code>.</li>
		  <li><b>MUST</b> toate clasele de test (API) extind <code class="inline">BaseTestAPI</code>.</li>
		  <li><b>MUST</b> <code class="inline">BaseTestAPI</code> declară listener-ele prin
			  <code class="inline">@Listeners</code>, în ordinea:
			  <code class="inline">AllureTestNg</code>,
			  <code class="inline">TestListener</code>.</li>
		  <li><b>MUST</b> inițializarea infrastructurii comune se realizează o singură dată per clasă, prin <code class="inline">@BeforeClass(alwaysRun = true)</code>.</li>
		</ul>
        <pre><code>@Listeners({
    io.qameta.allure.testng.AllureTestNg.class,
    com.endava.ai.core.TestListener.class
})
public abstract class BaseTestAPI {

  @BeforeClass(alwaysRun = true)
  public void baseSetup() {
    ApiClient.init();
    requireTokenForWrites();
  }

  protected void requireTokenForWrites() {
    String token = ConfigManager.get("auth.token");
    if (token == null || token.trim().isEmpty())
      throw new SkipException("auth.token is not set");
  }
}</code></pre>
      </details>
    </div>
  </details>
</div>

<hr class="sep">
<div class="card">
<h2>6) Artefacte livrare</h2>
<details>
<summary>
  <span class="summary-title">Conținut livrabil</span>
  <span class="badge">CORE</span>
</summary>
<ul>
<li>Parte a aceluiași proiect Maven</li>
<li><code class="inline">pom.xml</code>, <code class="inline">framework.properties</code>, <code class="inline">testng.xml</code>, <code class="inline">README.md</code></li>
<li><code class="inline">README.md</code> MUST: explică configurarea proiectului, pașii de execuție, abordarea de testare și strategia de raportare.</li>
</ul>
</details>
</div>

</div>
</div></body>
</html>
